elasticsearch:
  image: elasticsearch:1.4.4
  ports:
    - "9200:9200"
kibana:
  image: thegameofcode/kibana
  links:
    - elasticsearch
  ports:
    - "5601:5601"
client:
  image: thegameofcode/ubuntu
  links:
    - "nagios:nagios"
  volumes:
    - "$PWD/ubuntu-client/50-nagios-json.conf:/etc/rsyslog.d/50-nagios-json.conf"
  volumes_from:
    - nagios
  expose:
    - "11514:11514"
    - "11515:11515"
server:
  image: thegameofcode/ubuntu
  links:
    - "elasticsearch:elasticsearch"
    - "client:client"
  volumes:
    - "$PWD/ubuntu-server/50-nagios-json.conf:/etc/rsyslog.d/50-nagios-json.conf"
nagios:
  image: thegameofcode/nagios
  volumes:
    - "$PWD/nagios/htpasswd.users:/usr/local/nagios/etc/htpasswd.users"
    - "$PWD/nagios/nagios.cfg:/usr/local/nagios/etc/nagios.cfg"
    - "$PWD/nagios/commands.cfg:/usr/local/nagios/etc/objects/commands.cfg"
    - "$PWD/nagios/templates.cfg:/usr/local/nagios/etc/objects/templates.cfg"
    - "$PWD/nagios/nagios.log:/usr/local/nagios/var/nagios.log"
    - "$PWD/nagios/test.log:/usr/local/nagios/var/test.log"
  ports:
    - "80:80"