module(load="imfile" PollingInterval="10") # needs to be done just once
module(load="omzmq3") # for listening to /dev/log

input(type="imfile"
      file="/var/log/bunyan.log"
      tag="staging-node-api"
      ruleset="bunyan")

template(name="file-format" type="list") {
	property(name="msg" spifno1stsp="on" )
	property(name="msg" droplastlf="on" )
	constant(value="\n")
}

ruleset(name="bunyan") {
	action(type="omzmq3" sockType="PUSH" action="CONNECT" description="tcp://server:11514" template="file-format")
}
